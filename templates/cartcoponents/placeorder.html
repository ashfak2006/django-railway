{% load static %}
<style>
.timeline-dot {
width: 20px;
height: 20px;
border-radius: 50%;
position: relative;
z-index: 2;
}
.timeline-line {
height: 2px;
position: absolute;
top: 10px;
left: 0;
right: 0;
z-index: 1;
}
@media (min-width: 1024px) {
.tab-bar-desktop {
left: 50%;
transform: translateX(-50%);
max-width: 500px;
border-radius: 999px;
margin-bottom: 1rem;
box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
}
}
</style>
<main class="pt-16 pb-20 px-4 lg:px-0">
<div class="max-w-md mx-auto lg:max-w-6xl">
<h2 class="text-2xl font-semibold mb-6 mt-4">Order Status</h2>
<!-- Order Header Section -->
<div class="bg-white rounded-lg shadow-sm p-5 mb-6">
<div class="flex justify-between items-start mb-4">
<div>
<p class="text-sm text-gray-500">Order Number</p>
<p class="font-medium">{{orders.order_number}}</p>
</div>
<div class="text-right">
<p class="text-sm text-gray-500">Order Date</p>
<p class="font-medium">{{orders.processed_at}}</p>
</div>
</div>




<!-- Order Timeline -->
{% if orders.status == 5 %}
<div class="mt-4 text-center">
<p class="text-sm font-medium text-red-600">Your order is being cancelled</p>
<p class="text-xs text-gray-500 mt-1">Estimated shipping: cancelled</p>
</div>
{% else %}
<div class="relative mt-8 mb-4">
<div class="timeline-line bg-gray-200"></div>
{% if orders.status == 3  %}
<div class="timeline-line bg-primary" style="width: 65%;"></div>
{% elif orders.status == 4 %}
<div class="timeline-line bg-primary" style="width: 97%;"></div>
{% elif orders.status == 5 %}
<div class="timeline-line bg-red"  style="width: 97%;"></div>
{% else %}
<div class="timeline-line bg-gray-200" style="width: 33%;"></div>
{% endif %}
<div class="flex justify-between relative">
<div class="flex flex-col items-center">
<div class="timeline-dot bg-primary flex items-center justify-center">
<i class="ri-check-line ri-sm text-white"></i>
</div>
<p class="text-xs mt-2 font-medium">Ordered</p>
</div>
<div class="flex flex-col items-center">
<div class="timeline-dot bg-primary flex items-center justify-center">
<i class="ri-check-line ri-sm text-white"></i>
</div>
<p class="text-xs mt-2 font-medium">Processing</p>
</div>
{% if orders.status == 3 %}
<div class="flex flex-col items-center">
<div class="timeline-dot bg-primary flex items-center justify-center">
    <i class="ri-check-line ri-sm text-white"></i>
</div>
<p class="text-xs mt-2 font-medium ">Shipped</p>
</div>
<div class="flex flex-col items-center">
<div class="timeline-dot bg-gray-200 flex items-center justify-center">
</div>
<p class="text-xs mt-2 font-medium text-gray-500">Delivered</p>
</div>
</div>
{% elif orders.status == 4 %}
<div class="flex flex-col items-center">
<div class="timeline-dot bg-primary flex items-center justify-center">
    <i class="ri-check-line ri-sm text-white"></i>
</div>
<p class="text-xs mt-2 font-medium ">Shipped</p>
</div>
<div class="flex flex-col items-center">
<div class="timeline-dot bg-primary flex items-center justify-center">
    <i class="ri-check-line ri-sm text-white"></i>
</div>
<p class="text-xs mt-2 font-medium ">Delivered</p>
</div>
</div>
{% else %}
<div class="flex flex-col items-center">
<div class="timeline-dot bg-gray-200 flex items-center justify-center">
</div>
<p class="text-xs mt-2 font-medium text-gray-500">Shipped</p>
</div>
<div class="flex flex-col items-center">
<div class="timeline-dot bg-gray-200 flex items-center justify-center">
</div>
<p class="text-xs mt-2 font-medium text-gray-500">Delivered</p>
</div>
</div>
</div>
{% endif %}
<div class="mt-4 text-center">
<p class="text-sm font-medium text-primary">Your order is being {{orders.get_status_display}}</p>
<p class="text-xs text-gray-500 mt-1">Estimated Delivery: {{orders.shipping.calculate_estimated_delivery_date}}</p>
</div>
{% endif %}
</div>
<!-- Product Details Section -->
<div class="bg-white rounded-lg shadow-sm p-5 mb-6 lg:grid lg:grid-cols-2 lg:gap-8">
<div class="lg:col-span-2">
<h3 class="text-lg font-medium mb-4">Items in Your Order</h3>
</div>
{% for item in orders.order_items.all %}
<div class="flex mb-5 pb-5 border-b border-gray-100">
    <div class="w-20 h-20 rounded-md overflow-hidden flex-shrink-0">
        <img src="{{item.product.image1.url}}" alt="Gold Diamond Necklace" class="w-full h-full object-cover">
    </div>
    <div class="ml-4 flex-grow">
        <h4 class="font-medium">{{item.product.title}}</h4>
        <p class="text-sm text-gray-500 mt-1">{{objects.product.catogaris.name}}</p>
        <div class="flex justify-between mt-2">
            <p class="text-sm">Qty:{{item.quantity}}</p>
            <p class="font-medium">${{item.total_price}}</p>
        </div>
    </div>
</div>
 {% endfor %}
 <!-- Shipping Info -->
<div class="mt-6 pt-5 border-t border-gray-100">
    <div class="flex items-center mb-3">
        <div class="w-8 h-8 flex items-center justify-center mr-2 text-primary">
            <i class="ri-truck-line ri-lg"></i>
        </div>
    <div>
    <p class="text-sm font-medium">{{orders.shipping.shipping_method}}</p>
    <p class="text-xs text-gray-500">Estimated delivery: {{orders.shipping.calculate_estimated_delivery_date}}</p>
</div>
</div>
<div class="flex items-center">
    <div class="w-8 h-8 flex items-center justify-center mr-2 text-primary">
        <i class="ri-map-pin-line ri-lg"></i>
    </div>
<div>
    <p class="text-sm font-medium">Shipping to:</p>
    <p class="text-xs text-gray-500">
        <p>{{orders.shipping.shipping_address.name}}
            {{orders.shipping.shipping_address.road_name}},{{orders.shipping.shipping_address.house_no}}
            {{orders.shipping.shipping_address.city}},{{orders.shipping.shipping_address.pincode}}
            {{orders.shipping.shipping_address.state}}
        </p>
</div>
</div>
</div>
</div>
<!-- Payment Information -->
<div class="bg-white rounded-lg shadow-sm p-5 mb-6 lg:grid lg:grid-cols-2 lg:gap-8">
<h3 class="text-lg font-medium mb-4">Payment Information</h3>
<!-- Payment Status -->
<div class="bg-primary-50 border border-yellow-200 rounded-lg p-4 mb-5">
<div class="flex items-center">
<div class="w-8 h-8 flex items-center justify-center mr-2 text-yellow-500">
    {% if payment.status == 'pending' %}
<i class="ri-time-line ri-lg"></i>
    {% elif payment.status == 'completed' %}
    <i class="ri-check-line ri-lg "></i>
    {% elif payment.status == 'refunded' %}
      <i class="ri-refund-line ri-lg"></i>
     {% elif payment.status == 'canceled' %}
      <i class="ri-close-circle-line ri-lg"></i>
      {% else %}
    <i class="ri-error-warning-line ri-lg"></i>
    {% endif %}
</div>
<div>
    {% if payment.status == 'pending' %}
<p class="text-sm font-medium text-yellow-700">Payment Pending</p>
     {% elif payment.status == 'completed' %}
<p class="text-sm font-medium text-green-700">Payment Completed</p>
     {% elif payment.status == 'refunded' %}
<p class="text-sm font-medium text-green-700">Payment refunded</p>
      {% elif payment.status == 'canceled' %}
<p class="text-sm font-medium text-red-700">Payment canceled</p>
        {% else %}
<p class="text-sm font-medium text-red-700">Payment failed</p> 
      {% endif %}
<p class="text-xs text-primary-600">{{payment.payment_method}} selected</p>
 
</div>
</div>
</div>
<!-- Order Summary -->
<div class="mb-5">
<div class="flex justify-between mb-2">
<p class="text-sm text-gray-500">Subtotal</p>
<p class="text-sm">${{orders.total_amount}}</p>
</div>
<div class="flex justify-between mb-2">
<p class="text-sm text-gray-500">Shipping</p>
   {% if cart.shipping.is_free %}
   <p class="text-sm text-green-600">free</p>
   {% else %}
<p class="text-sm text-green-600">{{orders.shipping.cost}}</p>
    {% endif %}
</div>
<div class="flex justify-between pt-3 border-t border-gray-100">
<p class="font-medium">Total</p>
<p class="font-medium">${{orders.grand_total}}</p>
</div>
</div>

<!-- Pay Now Button -->
<button class="w-full bg-primary text-white py-3 rounded-button font-medium mb-4 cursor-pointer !rounded-button hover:bg-primary/90 transition">
Pay Now
</button>
<!-- Alternative Payment Methods -->
<p class="text-sm text-gray-500 mb-3">Or pay with:</p>
<div class="grid grid-cols-3 gap-3">
<button class="border border-gray-200 rounded-button py-2 px-3 flex items-center justify-center cursor-pointer hover:bg-gray-50">
<i class="ri-visa-line ri-lg mr-1"></i>
<span class="text-xs">Card</span>
</button>
<button class="border border-gray-200 rounded-button py-2 px-3 flex items-center justify-center cursor-pointer hover:bg-gray-50">
<i class="ri-paypal-line ri-lg mr-1"></i>
<span class="text-xs">PayPal</span>
</button>
</div>
</div>
<!-- Action Buttons -->
<div class="grid grid-cols-2 gap-4 mb-6">
{% if orders.status != 5 %}
<button class="bg-primary text-white py-3 rounded-button font-medium cursor-pointer !rounded-button hover:bg-primary/90 transition flex items-center justify-center">
<i class="ri-map-pin-line ri-lg mr-2"></i>
Track Order
</button>
{% endif %}
<button class="border border-primary text-primary py-3 rounded-button font-medium cursor-pointer !rounded-button hover:bg-primary/10 transition flex items-center justify-center">
<i class="ri-customer-service-2-line ri-lg mr-2"></i>
Need Help?
</button>
</div>
<!-- Cancel Order -->
 {% if orders.status != 5 %}
<div class="text-center mb-10">
<button class="text-gray-500 text-sm underline cursor-pointer hover:text-gray-700">
Cancel Order
</button>
</div>
{% endif %}
</div>
</main>


<script id="order-tracking">
document.addEventListener('DOMContentLoaded', function() {

const payNowButton = document.querySelector('.bg-primary.text-white.py-3.rounded-button.font-medium.mb-4');
const alternativePayments = document.querySelectorAll('.grid.grid-cols-3.gap-3 button');
payNowButton.addEventListener('click', function() {
// Create payment success modal
const modal = document.createElement('div');
modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-20';
const modalContent = document.createElement('div');
modalContent.className = 'bg-white rounded-lg p-6 w-5/6 max-w-md';
modalContent.innerHTML = `
<div class="text-center mb-4">
<div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
<i class="ri-check-line ri-2x text-green-500"></i>
</div>
<h3 class="text-xl font-medium">Payment Successful</h3>
<p class="text-sm text-gray-500 mt-2">Your payment has been processed successfully.</p>
</div>
<button class="w-full bg-primary text-white py-3 rounded-button font-medium cursor-pointer !rounded-button">
Continue Shopping
</button>
`;
modal.appendChild(modalContent);
document.body.appendChild(modal);
// Close modal when clicking outside or on continue button
modal.addEventListener('click', function(e) {
if (e.target === modal || e.target.textContent.trim() === 'Continue Shopping') {
document.body.removeChild(modal);
}
});
});
// Add click event for alternative payment methods
alternativePayments.forEach(button => {
button.addEventListener('click', function() {
const paymentMethod = this.textContent.trim();
// Create payment method modal
const modal = document.createElement('div');
modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-20';
const modalContent = document.createElement('div');
modalContent.className = 'bg-white rounded-lg p-6 w-5/6 max-w-md';
modalContent.innerHTML = `
<div class="mb-4">
<h3 class="text-xl font-medium mb-4">Pay with ${paymentMethod}</h3>
<div class="mb-4">
<label class="block text-sm font-medium text-gray-700 mb-1">Card Number</label>
<input type="text" class="w-full border border-gray-300 rounded-button p-3 text-sm" placeholder="1234 5678 9012 3456">
</div>
<div class="grid grid-cols-2 gap-4 mb-4">
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">Expiry Date</label>
<input type="text" class="w-full border border-gray-300 rounded-button p-3 text-sm" placeholder="MM/YY">
</div>
<div>
<label class="block text-sm font-medium text-gray-700 mb-1">CVV</label>
<input type="text" class="w-full border border-gray-300 rounded-button p-3 text-sm" placeholder="123">
</div>
</div>
</div>
<button class="w-full bg-primary text-white py-3 rounded-button font-medium cursor-pointer !rounded-button mb-3">
Pay $1,825.00
</button>
<button class="w-full border border-gray-300 py-3 rounded-button font-medium cursor-pointer !rounded-button text-gray-500">
Cancel
</button>
`;
modal.appendChild(modalContent);
document.body.appendChild(modal);
// Close modal when clicking outside or on cancel button
modal.addEventListener('click', function(e) {
if (e.target === modal || e.target.textContent.trim() === 'Cancel') {
document.body.removeChild(modal);
}
});
});
});
// Track Order button functionality
const trackOrderButton = document.querySelector('.grid.grid-cols-2.gap-4 button:first-child');
trackOrderButton.addEventListener('click', function() {
// Create tracking modal
const modal = document.createElement('div');
modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-20';
const modalContent = document.createElement('div');
modalContent.className = 'bg-white rounded-lg p-6 w-5/6 max-w-md';
modalContent.innerHTML = `
    <div class="mb-4">
        <h3 class="text-xl font-medium mb-4">Track Your Order</h3>
        <div class="bg-gray-50 p-4 rounded-lg mb-4">
            <p class="text-sm font-medium">Tracking Number</p>
            <p class="text-sm text-gray-500">{{orders.tracking_number}}</p>
        </div>
        <div class="relative mb-4">
            <div class="absolute left-4 top-0 bottom-0 w-0.5 bg-gray-200"></div>
                <div class="relative pl-10 pb-6">
                    <div class="absolute left-2 w-5 h-5 rounded-full bg-primary flex items-center justify-center">
                        <i class="ri-check-line ri-sm text-white"></i>
                    </div>
                    <p class="font-medium">Order Placed</p>
                    <p class="text-xs text-gray-500">June 10, 2025 - 2:34 PM</p>
                </div>
            <div class="relative pl-10 pb-6">
                <div class="absolute left-2 w-5 h-5 rounded-full bg-primary flex items-center justify-center">
                <i class="ri-check-line ri-sm text-white"></i>
            </div>
            <p class="font-medium">Processing</p>
            <p class="text-xs text-gray-500">{{orders.processed_at}}</p>
        </div>
    {% if orders.status == 3 %}
        <div class="relative pl-10 pb-6">
            <div class="absolute left-2 w-5 h-5 rounded-full bg-primary flex items-center justify-center">
                <i class="ri-check-line ri-sm text-white "></i></div>
                <p class="font-medium text-gray-500">Shipped</p>
                <p class="text-xs text-gray-500">{{orders.shipping.shipped_at}}</p>
            </div>
            <div class="relative pl-10">
            <div class="absolute left-2 w-5 h-5 rounded-full bg-gray-200"></div>
                <p class="font-medium text-gray-400">Delivered</p>
                <p class="text-xs text-gray-500">Expected {{orders.shipping.calculate_estimated_delivery_date}}</p>
            </div>
            </div>
        </div>
    {% elif orders.status == 4 %}
        <div class="relative pl-10 pb-6">
            <div class="absolute left-2 w-5 h-5 rounded-full bg-primary flex items-center justify-center">
                <i class="ri-check-line ri-sm text-white "></i></div>
                <p class="font-medium text-gray-500">Shipped</p>
                <p class="text-xs text-gray-500">{{orders.shipping.shipped_at}}</p>
            </div>
            <div class="relative pl-10">
            <div class="absolute left-2 w-5 h-5 rounded-full bg-primary flex items-center justify-center">
                <i class="ri-check-line ri-sm text-white "></i></div>
                <p class="font-medium text-gray-500">Delivered</p>
                <p class="text-xs text-gray-500">{{orders.shipping.deliverd_at}}</p>
            </div>
            </div>
        </div>
    {% else %}
         <div class="relative pl-10 pb-6">
            <div class="absolute left-2 w-5 h-5 rounded-full bg-grey"></div>
                <p class="font-medium text-gray-400">Shipped</p>
                <p class="text-xs text-gray-500">will be update soon</p>
            </div>
            <div class="relative pl-10">
            <div class="absolute left-2 w-5 h-5 rounded-full bg-grey"></div>
                <p class="font-medium text-gray-500">Delivered</p>
                <p class="text-xs text-gray-500">Expected {{orders.shipping.calculate_estimated_delivery_date}}</p>
            </div>
            </div>
        </div>
    {% endif %}
    <button class="w-full bg-primary text-white py-3 rounded-button font-medium cursor-pointer !rounded-button">
    Close
    </button>
`;
modal.appendChild(modalContent);
document.body.appendChild(modal);
// Close modal when clicking outside or on close button
modal.addEventListener('click', function(e) {
if (e.target === modal || e.target.textContent.trim() === 'Close') {
document.body.removeChild(modal);
}
});
});
// Need Help button functionality
const helpButton = document.querySelector('.grid.grid-cols-2.gap-4 button:last-child');
helpButton.addEventListener('click', function() {
// Create help modal
const modal = document.createElement('div');
modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-20';
const modalContent = document.createElement('div');
modalContent.className = 'bg-white rounded-lg p-6 w-5/6 max-w-md';
modalContent.innerHTML = `
<div class="mb-4">
<h3 class="text-xl font-medium mb-4">Customer Support</h3>
<div class="space-y-4">
<button class="w-full border border-gray-200 rounded-button p-4 flex items-center cursor-pointer hover:bg-gray-50">
<div class="w-10 h-10 flex items-center justify-center mr-3 text-primary">
<i class="ri-message-3-line ri-lg"></i>
</div>
<div class="text-left">
<p class="font-medium">Live Chat</p>
<p class="text-xs text-gray-500">Available 24/7</p>
</div>
</button>
<button class="w-full border border-gray-200 rounded-button p-4 flex items-center cursor-pointer hover:bg-gray-50">
<div class="w-10 h-10 flex items-center justify-center mr-3 text-primary">
<i class="ri-phone-line ri-lg"></i>
</div>
<div class="text-left">
<p class="font-medium">Call Us</p>
<p class="text-xs text-gray-500">+1 (800) 123-4567</p>
</div>
</button>
<button class="w-full border border-gray-200 rounded-button p-4 flex items-center cursor-pointer hover:bg-gray-50">
<div class="w-10 h-10 flex items-center justify-center mr-3 text-primary">
<i class="ri-mail-line ri-lg"></i>
</div>
<div class="text-left">
<p class="font-medium">Email Support</p>
<p class="text-xs text-gray-500">support@jewelrystore.com</p>
</div>
</button>
</div>
</div>
<button class="w-full bg-primary text-white py-3 rounded-button font-medium cursor-pointer !rounded-button">
Close
</button>
`;
modal.appendChild(modalContent);
document.body.appendChild(modal);
// Close modal when clicking outside or on close button
modal.addEventListener('click', function(e) {
if (e.target === modal || e.target.textContent.trim() === 'Close') {
document.body.removeChild(modal);
}
});
});
// Cancel Order button functionality
const cancelButton = document.querySelector('.text-gray-500.text-sm.underline');
cancelButton.addEventListener('click', function() {
// Create cancel confirmation modal
const modal = document.createElement('div');
modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-20';
const modalContent = document.createElement('div');
modalContent.className = 'bg-white rounded-lg p-6 w-5/6 max-w-md';
modalContent.innerHTML = `
<div class="text-center mb-4">
<div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
<i class="ri-error-warning-line ri-2x text-red-500"></i>
</div>
<h3 class="text-xl font-medium">Cancel Order?</h3>
<p class="text-sm text-gray-500 mt-2">Are you sure you want to cancel this order? This action cannot be undone.</p>
</div>
<a href="{% url 'cancel_order' orders.order_number %}">
<button class="w-full bg-red-500 text-white py-3 rounded-button font-medium cursor-pointer !rounded-button mb-3">
Yes, Cancel Order
</button><a>
<button class="w-full border border-gray-300 py-3 rounded-button font-medium cursor-pointer !rounded-button text-gray-700">
No, Keep Order
</button>
`;
modal.appendChild(modalContent);
document.body.appendChild(modal);
// Close modal when clicking outside or on keep order button
modal.addEventListener('click', function(e) {
if (e.target === modal || e.target.textContent.trim() === 'No, Keep Order') {
document.body.removeChild(modal);
} else if (e.target.textContent.trim() === 'Yes, Cancel Order') {
document.body.removeChild(modal);
// Show cancellation success message
const successModal = document.createElement('div');
successModal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-20';
const successContent = document.createElement('div');
successContent.className = 'bg-white rounded-lg p-6 w-5/6 max-w-md';
successContent.innerHTML = `
<div class="text-center mb-4">
<div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
<i class="ri-check-line ri-2x text-green-500"></i>
</div>
<h3 class="text-xl font-medium">Order Cancelled</h3>
<p class="text-sm text-gray-500 mt-2">Your order has been successfully cancelled. Refund will be processed within 5-7 business days.</p>
</div>
<button class="w-full bg-primary text-white py-3 rounded-button font-medium cursor-pointer !rounded-button">
Return to Home
</button>
`;
successModal.appendChild(successContent);
document.body.appendChild(successModal);
// Close success modal when clicking outside or on return button
successModal.addEventListener('click', function(e) {
if (e.target === successModal || e.target.textContent.trim() === 'Return to Home') {
document.body.removeChild(successModal);
}
});
}
});
});
});
</script>